#! /usr/bin/env sh

check_distfile() {
	if ! test -f "$PWD/Distfile"; then
		return 1
	fi
	return 0
}

setup_workdir() {
	DIR=$(mktemp -d -p "$PWD")
}

clean_workdir() {
	grep -qs "$DIR" "/proc/mounts" || rm -r -f "$DIR"
}

main() {
	setup_workdir

	build

	clean_workdir
}

if check_distfile; then
	. "$PWD/Distfile"
fi

main "$@"
